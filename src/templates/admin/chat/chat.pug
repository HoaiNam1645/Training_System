doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title= title || 'Admin Dashboard - Chat System'
    script(src="https://cdn.tailwindcss.com")
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")
    link(href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet")
    link(rel="stylesheet", href="/css/chat.css")
    style(type="text/css").
    

  body(class="min-h-screen flex")
    //- Include Sidebar Component
    include ../components/sidebar
    +sidebar('chat', 'Admin User', 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face')

    //- Main Chat Area
    div(class="flex-1 flex flex-col")
      //- Header
      header(class="bg-white/80 backdrop-blur-sm border-b border-gray-200 px-6 py-4 flex items-center justify-between")
        div(class="flex items-center space-x-4")
          button(class="md:hidden p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100" id="sidebarToggle")
            i(class="fas fa-bars")
          div
            h1(class="text-xl font-semibold text-gray-900") Phòng trò chuyện
            p(class="text-sm text-gray-500")= description || 'Training System'
        div(class="flex items-center space-x-3")
          button(class="p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 relative")
            i(class="fas fa-bell")
            span(class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full")
          button(class="p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100" onclick="logout()")
            i(class="fas fa-sign-out-alt")

      //- Chat Container
      main(class="flex-1 p-4")
        div(class="max-w-4xl mx-auto h-full flex flex-col")
          div(class="chat-container flex-1 flex flex-col")
            //- Chat Header
            div(class="p-4 border-b border-gray-200 bg-white/50 backdrop-blur-sm flex-shrink-0")
              div(class="flex items-center justify-between")
                div(class="flex items-center space-x-3")
                  div(class="relative")
                    img(src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face" alt="User avatar" class="user-avatar w-10 h-10 rounded-full")
                    div(class="online-indicator")
                  div(class="flex-1")
                    h3(class="text-base font-semibold text-gray-900" id="course-name") Select Course
                    p(class="text-xs text-gray-500" id="course-status") Choose a course to start chatting
                div(class="flex items-center space-x-2")
                  select(id="course-selector" class="px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm")
                    option(value="") Select Course
                  button(id="join-room-btn" class="px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm" disabled)
                    i(class="fas fa-sign-in-alt mr-1.5")
                    span Join Room

            //- Messages Area
            div(class="messages-container scrollbar-custom")
              div(id="chat-messages" class="messages-wrapper")
                //- Messages will be inserted here dynamically

            //- Input Area
            div(class="p-4 border-t border-gray-200 bg-white/50 backdrop-blur-sm flex-shrink-0")
              form(id="chat-form")
                div(class="input-container flex items-center space-x-2 p-2")
                  button(type="button" class="p-1.5 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 flex-shrink-0")
                    i(class="fas fa-paperclip text-sm")
                  textarea(id="message" rows="1" class="flex-1 border-none bg-transparent resize-none focus:outline-none placeholder-gray-500 text-sm" placeholder="Type your message here...")
                  button(type="button" class="p-1.5 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 flex-shrink-0")
                    i(class="fas fa-smile text-sm")
                  button(type="submit" class="send-button text-white flex-shrink-0 w-8 h-8")
                    i(class="fas fa-paper-plane text-sm")

    script(src="/socket.io/socket.io.js")
    script(src="/js/chat.js")
    script.
    


